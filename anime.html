<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>熔岩番剧库 - Loading | LavaAnime</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.staticfile.org/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <script src="https://cdn.staticfile.org/bootstrap/5.1.3/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <style>
        ::-webkit-scrollbar {
            width: 10px;
            height: 6px;
            background-color: rgba(0, 0, 0, 0);
        }

        ::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.25);
            border-radius: 10px;
            border: 0px solid transparent;
            background-clip: content-box;
        }

        ::-webkit-scrollbar-track {
            background-color: transparent;
        }
    </style>
    <script>
        $(document).ready(function () {

            animeApiUrl = "https://dav.5t5.top/api/v3/share/list/jqMFl"

            console.log(getUrlParams("path").path)
            AnimePath = getUrlParams("path").path
            

            $.ajax({
                url: animeApiUrl + AnimePath,
                success: function (result) {
                    objects = result.data.objects
                    mySort(objects, "name")
                    console.log(objects)
                    for (var i = 0; i < objects.length; i++) {

                    }
                }
            })

            function printAnimeList(){
                
            }


            // 为每个按钮追加点击时触发的函数
            $(".la-list-anime").click(function () {
                        

                    })
            console.log($(".la-list-anime"))




            //根据数组子项排序函数, 给出数组和排序的子项，原数组会被自动排序。代码来自网络
            function mySort(list, field) {
                var str = list[0][field]
                var pattern = new RegExp("[\u4E00-\u9FA5]+");
                var pattern2 = new RegExp("[A-Za-z]+");
                //验证是否是中文
                if (pattern.test(str) || pattern2.test(str)) {
                    list.sort(function (item1, item2) {
                        return item1[field].localeCompare(item2[field], "zh-CN");
                    });
                }
                //验证是否是数字
                var pattern3 = new RegExp("[0-9]+");
                if (pattern3.test(str)) {
                    list.sort(function (a, b) {
                        var value1 = a[field];
                        var value2 = b[field];
                        return value1 - value2;
                    });
                }
            }

            // 网页参数匹配函数。代码来自网络
            function getUrlParams() {
                let obj = {};

                if (!window) {
                    return;
                }

                let str = window.location.search || '';

                if (str && str.slice(1)) {
                    // 去掉 ？ ，然后以 & 分割
                    let queryArray = str.slice(1).split('&');
                    queryArray.map((query) => {
                        // param=value 以 = 分割
                        let temp = query.split('=');
                        if (temp.length > 1) {
                            // 收集参数
                            obj[temp[0]] = temp[1];
                        }
                    })
                }

                return obj;
            }
        })
    </script>
</head>

<body>
    <div class="container">


        <div id="la-player" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 id="la-player-header" class="modal-title">正在等待熔岩云盘返回播放链接...</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div id="la-player-body" class="modal-body">
                        <p>请稍等，这段文字通常活不过 1 秒...<br>但是若持续看到此提示可能是熔岩云盘出现异常或您的网络连接断开！</p>
                    </div>
                </div>
            </div>
        </div>


        <div class="list-group">
            <button type="button" data-bs-toggle="modal" data-bs-target="#la-player"
                class="la-list-anime list-group-item list-group-item-action">[BeanSub&FZSD][Kimetsu_no_Yaiba][34v2][GB][1080P][x264_AAC].mp4</button>
        </div>
    </div>
</body>

</html>